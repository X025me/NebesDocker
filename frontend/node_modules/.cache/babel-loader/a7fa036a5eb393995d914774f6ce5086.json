{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import{Collapse,notification}from'antd';import axios from'axios';import{API_SERVER1}from'../../../../../../config/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Panel=Collapse.Panel;var Friends=function Friends(_ref){var listOpen=_ref.listOpen;var _useState=useState(listOpen),_useState2=_slicedToArray(_useState,2),chatOpen=_useState2[0],setChatOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),notApproved=_useState8[0],setNotApproved=_useState8[1];var account=useSelector(function(state){return state.account;});var requests=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:8000/data/requests/request_list_aproved/');case 3:response=_context.sent;_context.next=6;return response.json();case 6:res=_context.sent;console.log('data',res.results);setUsers(res.results);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function requests(){return _ref2.apply(this,arguments);};}();var approve=function approve(id){axios.get(API_SERVER1+\"data/requests/approval/\".concat(id),{headers:{Authorization:\"\".concat(account.token)}}).then(function(response){requests();requestsNotApproved();notification.open({message:'Success',description:\"Approved\",className:'custom-class',style:{width:600}});}).catch(function(error){console.log(error);notification.open({message:'Fail',description:\"Not Approved\",className:'custom-class',style:{width:600}});});};var ColapserDetail=function ColapserDetail(_ref3){var model=_ref3.model,data=_ref3.data;console.log('from view',data);if(model=='NewvoteRcmax'){return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',flexDirection:'column',alignItems:'left'},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"From RC Maximum Results \"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Full Name: - \",data.content_object.result.candidate.fullname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Ballot Order: - \",data.content_object.result.candidate.ballotorder]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Regional Constituency: - \",data.content_object.result.general.rcconstituency.regionalconstituencyname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Region: - \",data.content_object.result.general.region.regionname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Vote: - \",data.content_object.result.vote]})]});}else if(model=='NewvoteHoprmax'){return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',flexDirection:'column',alignItems:'left'},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"From HOPR Maximum Results \"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Full Name: - \",data.content_object.result.candidate.fullname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Ballot Order: - \",data.content_object.result.candidate.ballotorder]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Region: - \",data.content_object.result.general.region]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Vote: - \",data.content_object.result.vote]})]});}else if(model=='NewvoteHoprgeneral'){return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',flexDirection:'column',alignItems:'left'},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"From HOPR General \"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Constituency: - \",data.content_object.hoprconstituency.constituencyname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Number Of PS: - \",data.content_object.no_of_pollingstation]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Region: - \",data.content_object.region.regionname]})]});}else if(model=='NewvoteHopresult'){return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',flexDirection:'column',alignItems:'left'},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"From HOPR Results \"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Candidate: - \",data.content_object.candidate.fullname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Ballot order: - \",data.content_object.candidate.ballotorder]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Party: - \",data.content_object.party.politicalpartynameen]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Vote: - \",data.content_object.vote]})]});}else if(model=='NewvoteRcgeneral'){return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',flexDirection:'column',alignItems:'left'},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"From RC General \"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Regional Constituency: - \",data.content_object.rcconstituency.regionalconstituencyname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Region: - \",data.content_object.rcconstituency.regionid.regionname]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Number Of PS: - \",data.content_object.no_of_pollingstation]})]});}else{return/*#__PURE__*/_jsx(\"div\",{children:\"This is Default\"});}};var requestsNotApproved=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('http://localhost:8000/data/requests/request_list_notapproved/');case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:res=_context2.sent;console.log('not approved',res);setNotApproved(res.results);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function requestsNotApproved(){return _ref4.apply(this,arguments);};}();function callback(key){console.log(key);}useEffect(function(){requests();setChatOpen(false);requestsNotApproved();console.log(account);},[listOpen]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(_Fragment,{children:account.user.is_staff&&!account.user.is_superuser?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[notApproved.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,margin:10,backgroundColor:'#8f4444fa',color:'white'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'white',paddingRight:10,textDecoration:'capitalize'},children:item.owner}),item.request_description,/*#__PURE__*/_jsx(\"p\",{style:{fontSize:12,color:'aqua'},children:item.created_date}),account.user.is_superuser?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'row',justifyContent:'end',alignItems:'flex-end',width:'100%'}}):null,/*#__PURE__*/_jsx(Collapse,{onChange:callback,children:/*#__PURE__*/_jsx(Panel,{header:\"Detail\",children:/*#__PURE__*/_jsx(ColapserDetail,{model:item.models.name,data:item})},\"1\")})]});}),users.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,margin:10,backgroundColor:'#385238fa',borderRadius:10,color:'white'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#03fb00',paddingRight:10,textDecoration:'uppercase'},children:item.owner}),item.request_description,/*#__PURE__*/_jsx(\"p\",{style:{fontSize:12,color:'gray'},children:item.created_date}),/*#__PURE__*/_jsx(Collapse,{onChange:callback,children:/*#__PURE__*/_jsx(Panel,{header:\"Detail\",children:/*#__PURE__*/_jsx(ColapserDetail,{model:item.models.name,data:item})},\"1\")})]});})]}):null}),/*#__PURE__*/_jsx(_Fragment,{children:account.user.is_superuser?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[notApproved?/*#__PURE__*/_jsx(_Fragment,{children:notApproved.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,margin:10,backgroundColor:'#8f4444fa',color:'white'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'white',paddingRight:10,textDecoration:'capitalize'},children:item.owner}),item.request_description,/*#__PURE__*/_jsx(\"p\",{style:{fontSize:12,color:'aqua'},children:item.created_date}),account.user.is_superuser?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'row',justifyContent:'end',alignItems:'flex-end',width:'100%'},children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return approve(item.id);},style:{backgroundColor:'green',borderWidth:0,margin:10},children:\"Approve\"})}):null,/*#__PURE__*/_jsx(Collapse,{onChange:callback,children:/*#__PURE__*/_jsx(Panel,{header:\"Detail\",children:/*#__PURE__*/_jsx(ColapserDetail,{model:item.models.name,data:item})},\"1\")})]});})}):null,users.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,margin:10,backgroundColor:'#385238fa',borderRadius:10,color:'white'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#03fb00',paddingRight:10,textDecoration:'uppercase'},children:item.owner}),item.request_description,/*#__PURE__*/_jsx(\"p\",{style:{fontSize:12,color:'gray'},children:item.created_date}),/*#__PURE__*/_jsx(Collapse,{onChange:callback,children:/*#__PURE__*/_jsx(Panel,{header:\"Detail\",children:item?/*#__PURE__*/_jsx(ColapserDetail,{model:item.models.name,data:item}):null},\"1\")})]});})]}):null})]});};export default Friends;","map":{"version":3,"sources":["/Users/johndoe/Nebe-data-vistualization/src/layouts/AdminLayout/NavBar/NavRight/ChatList/Friends/index.js"],"names":["React","useState","useEffect","useSelector","Collapse","notification","axios","API_SERVER1","Panel","Friends","listOpen","chatOpen","setChatOpen","user","setUser","users","setUsers","notApproved","setNotApproved","account","state","requests","fetch","response","json","res","console","log","results","approve","id","get","headers","Authorization","token","then","requestsNotApproved","open","message","description","className","style","width","catch","error","ColapserDetail","model","data","display","flexDirection","alignItems","content_object","result","candidate","fullname","ballotorder","general","rcconstituency","regionalconstituencyname","region","regionname","vote","hoprconstituency","constituencyname","no_of_pollingstation","party","politicalpartynameen","regionid","callback","key","is_staff","is_superuser","map","item","index","padding","margin","backgroundColor","color","paddingRight","textDecoration","owner","request_description","fontSize","created_date","justifyContent","models","name","borderRadius","borderWidth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Collapse, notification } from 'antd';\nimport axios from 'axios';\nimport { API_SERVER1 } from '../../../../../../config/constant';\n\nconst { Panel } = Collapse;\n\nconst Friends = ({ listOpen }) => {\n    const [chatOpen, setChatOpen] = useState(listOpen);\n    const [user, setUser] = useState([]);\n    const [users, setUsers] = useState([]);\n    const [notApproved, setNotApproved] = useState([]);\n    const account = useSelector((state) => state.account);\n\n    const requests = async () => {\n        try {\n            const response = await fetch('http://localhost:8000/data/requests/request_list_aproved/');\n            const res = await response.json();\n            console.log('data', res.results);\n\n            setUsers(res.results);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n    const approve = (id) => {\n        axios.get(API_SERVER1 + `data/requests/approval/${id}`, { headers: { Authorization: `${account.token}` } })\n            .then(function (response) {\n\n                requests();\n                requestsNotApproved();                \n                notification.open({\n                message: 'Success',\n                description:\n                  \"Approved\",\n                className: 'custom-class',\n                style: {\n                  width: 600,\n                },\n              });\n              \n            })\n            .catch(function (error) {\n                console.log(error)\n              notification.open({\n                message: 'Fail',\n                description: \"Not Approved\",\n                className: 'custom-class',\n                style: {\n                  width: 600,\n                },\n              });\n            });\n    };\n    const ColapserDetail = ({ model, data }) => {\n        console.log('from view', data);\n        if (model == 'NewvoteRcmax') {\n            return (\n                <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'left' }}>\n                    <h5>From RC Maximum Results </h5>\n\n                    <span>Full Name: - {data.content_object.result.candidate.fullname}</span>\n                    <span>Ballot Order: - {data.content_object.result.candidate.ballotorder}</span>\n                    <span>Regional Constituency: - {data.content_object.result.general.rcconstituency.regionalconstituencyname}</span>\n                    <span>Region: - {data.content_object.result.general.region.regionname}</span>\n                    <span>Vote: - {data.content_object.result.vote}</span>\n                </div>\n            );\n        } else if (model == 'NewvoteHoprmax') {\n            return (\n                <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'left' }}>\n                    <h5>From HOPR Maximum Results </h5>\n\n                    <span>Full Name: - {data.content_object.result.candidate.fullname}</span>\n                    <span>Ballot Order: - {data.content_object.result.candidate.ballotorder}</span>\n                    <span>Region: - {data.content_object.result.general.region}</span>\n                    <span>Vote: - {data.content_object.result.vote}</span>\n                </div>\n            );\n        } else if (model == 'NewvoteHoprgeneral') {\n            return (\n                <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'left' }}>\n                    <h5>From HOPR General </h5>\n\n                    <span>Constituency: - {data.content_object.hoprconstituency.constituencyname}</span>\n                    <span>Number Of PS: - {data.content_object.no_of_pollingstation}</span>\n                    <span>Region: - {data.content_object.region.regionname}</span>\n                </div>\n            );\n        } else if (model == 'NewvoteHopresult') {\n            return (\n                <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'left' }}>\n                    <h5>From HOPR Results </h5>\n\n                    <span>Candidate: - {data.content_object.candidate.fullname}</span>\n                    <span>Ballot order: - {data.content_object.candidate.ballotorder}</span>\n                    <span>Party: - {data.content_object.party.politicalpartynameen}</span>\n                    <span>Vote: - {data.content_object.vote}</span>\n                </div>\n            );\n        } else if (model == 'NewvoteRcgeneral') {\n            return (\n                <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'left' }}>\n                    <h5>From RC General </h5>\n\n                    <span>Regional Constituency: - {data.content_object.rcconstituency.regionalconstituencyname}</span>\n                    <span>Region: - {data.content_object.rcconstituency.regionid.regionname}</span>\n                    <span>Number Of PS: - {data.content_object.no_of_pollingstation}</span>\n                </div>\n            );\n        } else {\n            return <div>This is Default</div>;\n        }\n    };\n\n    const requestsNotApproved = async () => {\n        try {\n            const response = await fetch('http://localhost:8000/data/requests/request_list_notapproved/');\n            const res = await response.json();\n            console.log('not approved', res);\n            setNotApproved(res.results);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n    function callback(key) {\n        console.log(key);\n    }\n\n    useEffect(() => {\n        requests();\n        setChatOpen(false);\n        requestsNotApproved();\n\n        console.log(account);\n    }, [listOpen]);\n\n    return (\n        <React.Fragment>\n            <>\n                {account.user.is_staff && !account.user.is_superuser ? (\n                    <div style={{ display: 'flex', flexDirection: 'column' }}>\n                        {notApproved.map((item, index) => (\n                            <div style={{ padding: 10, margin: 10, backgroundColor: '#8f4444fa', color: 'white' }}>\n                                <p style={{ color: 'white', paddingRight: 10, textDecoration: 'capitalize' }}>{item.owner}</p>\n                                {item.request_description}\n                                <p style={{ fontSize: 12, color: 'aqua' }}>{item.created_date}</p>\n                                {account.user.is_superuser ? (\n                                    <div\n                                        style={{\n                                            display: 'flex',\n                                            flexDirection: 'row',\n                                            justifyContent: 'end',\n                                            alignItems: 'flex-end',\n                                            width: '100%'\n                                        }}\n                                    >\n                                        {/* <button onClick={approve(item.id)} style={{ backgroundColor: 'green', borderWidth: 0 }}>Approve</button> */}\n                                    </div>\n                                ) : null}\n                                <Collapse onChange={callback}>\n                                    <Panel header=\"Detail\" key=\"1\">\n                                        <ColapserDetail model={item.models.name} data={item} />\n                                    </Panel>\n                                </Collapse>\n                            </div>\n                        ))}\n                        {users.map((item, index) => (\n                            <div style={{ padding: 10, margin: 10, backgroundColor: '#385238fa', borderRadius: 10, color: 'white' }}>\n                                <p style={{ color: '#03fb00', paddingRight: 10, textDecoration: 'uppercase' }}>{item.owner}</p>\n                                {item.request_description}\n                                <p style={{ fontSize: 12, color: 'gray' }}>{item.created_date}</p>\n                                <Collapse onChange={callback}>\n                                    <Panel header=\"Detail\" key=\"1\">\n                                        <ColapserDetail model={item.models.name} data={item} />\n                                    </Panel>\n                                </Collapse>\n                            </div>\n                        ))}\n                    </div>\n                ) : null}\n            </>\n            <>\n                {account.user.is_superuser ? (\n                    <div style={{ display: 'flex', flexDirection: 'column' }}>\n                        {notApproved ? (\n                            <>\n                                {notApproved.map((item, index) => (\n                                    <div style={{ padding: 10, margin: 10, backgroundColor: '#8f4444fa', color: 'white' }}>\n                                        <p style={{ color: 'white', paddingRight: 10, textDecoration: 'capitalize' }}>{item.owner}</p>\n                                        {item.request_description}\n                                        <p style={{ fontSize: 12, color: 'aqua' }}>{item.created_date}</p>\n                                        {account.user.is_superuser ? (\n                                            <div\n                                                style={{\n                                                    display: 'flex',\n                                                    flexDirection: 'row',\n                                                    justifyContent: 'end',\n                                                    alignItems: 'flex-end',\n                                                    width: '100%'\n                                                }}\n                                            >\n                                                <button  onClick={() =>approve(item.id)} style={{ backgroundColor: 'green', borderWidth: 0, margin: 10 }}>Approve</button>\n                                            </div>\n                                        ) : null}\n                                        <Collapse onChange={callback}>\n                                            <Panel header=\"Detail\" key=\"1\">\n                                                <ColapserDetail model={item.models.name} data={item} />\n                                            </Panel>\n                                        </Collapse>\n                                    </div>\n                                ))}\n                            </>\n                        ) : null}\n                        {users.map((item, index) => (\n                            <div style={{ padding: 10, margin: 10, backgroundColor: '#385238fa', borderRadius: 10, color: 'white' }}>\n                                <p style={{ color: '#03fb00', paddingRight: 10, textDecoration: 'uppercase' }}>{item.owner}</p>\n                                {item.request_description}\n                                <p style={{ fontSize: 12, color: 'gray' }}>{item.created_date}</p>\n                                <Collapse onChange={callback}>\n                                    <Panel header=\"Detail\" key=\"1\">\n                                        {item ? <ColapserDetail model={item.models.name} data={item} /> : null}\n                                        {/* {item.content_object.result.general} */}\n                                    </Panel>\n                                </Collapse>\n                            </div>\n                        ))}\n                    </div>\n                ) : null}\n            </>\n        </React.Fragment>\n    );\n};\n\nexport default Friends;\n"]},"metadata":{},"sourceType":"module"}