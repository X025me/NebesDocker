{"ast":null,"code":"import _objectSpread from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectWithoutProperties from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"className\"];import React from'react';import{useDispatch}from'react-redux';import{Row,Col,Button,Alert}from'react-bootstrap';import*as Yup from'yup';import{Formik}from'formik';import axios from'axios';import useScriptRef from'../../../hooks/useScriptRef';import{API_SERVER}from'./../../../config/constant';import{ACCOUNT_INITIALIZE}from'./../../../store/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RestLogin=function RestLogin(_ref){var className=_ref.className,rest=_objectWithoutProperties(_ref,_excluded);var dispatcher=useDispatch();var scriptedRef=useScriptRef();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:'',submit:null},validationSchema:Yup.object().shape({email:Yup.string().email('Must be a valid email').max(255).required('Email is required'),password:Yup.string().max(255).required('Password is required')}),onSubmit:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref2){var setErrors,setStatus,setSubmitting;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors=_ref2.setErrors,setStatus=_ref2.setStatus,setSubmitting=_ref2.setSubmitting;try{axios.post(API_SERVER+'users/login',{password:values.password,email:values.email}).then(function(response){if(response.data.success){console.log(response.data);dispatcher({type:ACCOUNT_INITIALIZE,payload:{isLoggedIn:true,user:response.data.user,token:response.data.token}});if(scriptedRef.current){setStatus({success:true});setSubmitting(false);}}else{setStatus({success:false});setErrors({submit:response.data.msg});setSubmitting(false);}}).catch(function(error){console.log(error);setStatus({success:false});setErrors({submit:error.response.data.msg});setSubmitting(false);});}catch(err){console.error(err);if(scriptedRef.current){setStatus({success:false});setErrors({submit:err.message});setSubmitting(false);}}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref3.apply(this,arguments);};}(),children:function children(_ref4){var errors=_ref4.errors,handleBlur=_ref4.handleBlur,handleChange=_ref4.handleChange,handleSubmit=_ref4.handleSubmit,isSubmitting=_ref4.isSubmitting,touched=_ref4.touched,values=_ref4.values;return/*#__PURE__*/_jsxs(\"form\",_objectSpread(_objectSpread({noValidate:true,onSubmit:handleSubmit,className:className},rest),{},{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",error:touched.email&&errors.email,label:\"Email Address\",placeholder:\"Email Address\",name:\"email\",onBlur:handleBlur,onChange:handleChange,type:\"email\",value:values.email}),touched.email&&errors.email&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger form-text\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",error:touched.password&&errors.password,label:\"Password\",placeholder:\"Password\",name:\"password\",onBlur:handleBlur,onChange:handleChange,type:\"password\",value:values.password}),touched.password&&errors.password&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger form-text\",children:errors.password})]}),errors.submit&&/*#__PURE__*/_jsx(Col,{sm:12,children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:errors.submit})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-control custom-checkbox  text-left mb-4 mt-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:\"customCheck1\"}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-control-label\",htmlFor:\"customCheck1\",children:\"Save credentials.\"})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{mt:2,children:/*#__PURE__*/_jsx(Button,{className:\"btn-block\",color:\"primary\",disabled:isSubmitting,size:\"large\",type:\"submit\",variant:\"primary\",children:\"Sign IN\"})})})]}));}}),/*#__PURE__*/_jsx(\"hr\",{})]});};export default RestLogin;","map":{"version":3,"sources":["/Users/johndoe/Nebe-data-vistualization/src/views/auth/signin/RestLogin.js"],"names":["React","useDispatch","Row","Col","Button","Alert","Yup","Formik","axios","useScriptRef","API_SERVER","ACCOUNT_INITIALIZE","RestLogin","className","rest","dispatcher","scriptedRef","email","password","submit","object","shape","string","max","required","values","setErrors","setStatus","setSubmitting","post","then","response","data","success","console","log","type","payload","isLoggedIn","user","token","current","msg","catch","error","err","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Row, Col, Button, Alert } from 'react-bootstrap';\n\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport axios from 'axios';\nimport useScriptRef from '../../../hooks/useScriptRef';\nimport { API_SERVER } from './../../../config/constant';\nimport { ACCOUNT_INITIALIZE } from './../../../store/actions';\n\nconst RestLogin = ({ className, ...rest }) => {\n    const dispatcher = useDispatch();\n    const scriptedRef = useScriptRef();\n\n    return (\n        <React.Fragment>\n            <Formik\n                initialValues={{\n                    email: '',\n                    password: '',\n                    submit: null\n                }}\n                validationSchema={Yup.object().shape({\n                    email: Yup.string().email('Must be a valid email').max(255).required('Email is required'),\n                    password: Yup.string().max(255).required('Password is required')\n                })}\n                onSubmit={async (values, { setErrors, setStatus, setSubmitting }) => {\n                    try {\n                        axios\n                            .post(API_SERVER + 'users/login', {\n                                password: values.password,\n                                email: values.email\n                            })\n                            .then(function (response) {\n                                if (response.data.success) {\n                                    console.log(response.data);\n                                    dispatcher({\n                                        type: ACCOUNT_INITIALIZE,\n                                        payload: { isLoggedIn: true, user: response.data.user, token: response.data.token }\n                                    });\n                                    if (scriptedRef.current) {\n                                        setStatus({ success: true });\n                                        setSubmitting(false);\n                                    }\n                                } else {\n                                    setStatus({ success: false });\n                                    setErrors({ submit: response.data.msg });\n                                    setSubmitting(false);\n                                }\n                            })\n                            .catch(function (error) {\n                                console.log(error);\n                                setStatus({ success: false });\n                                setErrors({ submit: error.response.data.msg });\n                                setSubmitting(false);\n                            });\n                    } catch (err) {\n                        console.error(err);\n                        if (scriptedRef.current) {\n                            setStatus({ success: false });\n                            setErrors({ submit: err.message });\n                            setSubmitting(false);\n                        }\n                    }\n                }}\n            >\n                {({ errors, handleBlur, handleChange, handleSubmit, isSubmitting, touched, values }) => (\n                    <form noValidate onSubmit={handleSubmit} className={className} {...rest}>\n                        <div className=\"form-group mb-3\">\n                            <input\n                                className=\"form-control\"\n                                error={touched.email && errors.email}\n                                label=\"Email Address\"\n                                placeholder=\"Email Address\"\n                                name=\"email\"\n                                onBlur={handleBlur}\n                                onChange={handleChange}\n                                type=\"email\"\n                                value={values.email}\n                            />\n                            {touched.email && errors.email && <small className=\"text-danger form-text\">{errors.email}</small>}\n                        </div>\n                        <div className=\"form-group mb-4\">\n                            <input\n                                className=\"form-control\"\n                                error={touched.password && errors.password}\n                                label=\"Password\"\n                                placeholder=\"Password\"\n                                name=\"password\"\n                                onBlur={handleBlur}\n                                onChange={handleChange}\n                                type=\"password\"\n                                value={values.password}\n                            />\n                            {touched.password && errors.password && <small className=\"text-danger form-text\">{errors.password}</small>}\n                        </div>\n\n                        {errors.submit && (\n                            <Col sm={12}>\n                                <Alert variant=\"danger\">{errors.submit}</Alert>\n                            </Col>\n                        )}\n\n                        <div className=\"custom-control custom-checkbox  text-left mb-4 mt-2\">\n                            <input type=\"checkbox\" className=\"custom-control-input\" id=\"customCheck1\" />\n                            <label className=\"custom-control-label\" htmlFor=\"customCheck1\">\n                                Save credentials.\n                            </label>\n                        </div>\n\n                        <Row>\n                            <Col mt={2}>\n                                <Button\n                                    className=\"btn-block\"\n                                    color=\"primary\"\n                                    disabled={isSubmitting}\n                                    size=\"large\"\n                                    type=\"submit\"\n                                    variant=\"primary\"\n                                >\n                                    Sign IN\n                                </Button>\n                            </Col>\n                        </Row>\n                    </form>\n                )}\n            </Formik>\n            <hr />\n        </React.Fragment>\n    );\n};\n\nexport default RestLogin;\n"]},"metadata":{},"sourceType":"module"}