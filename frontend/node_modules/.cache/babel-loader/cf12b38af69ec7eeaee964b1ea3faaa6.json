{"ast":null,"code":"const conditionalHeaders = ['if-modified-since', 'if-none-match', 'if-unmodified-since', 'if-match', 'if-range'];\n\nconst configureOptions = opts => {\n  const options = { ...opts\n  };\n  options.method = options.method ? options.method.toUpperCase() : 'GET';\n  if (Object.prototype.hasOwnProperty.call(options, 'strictSSL')) options.rejectUnauthorized = options.strictSSL;\n  if (!options.retry) options.retry = {\n    retries: 0\n  };else if (typeof options.retry === 'string') {\n    const retries = parseInt(options.retry, 10);\n    if (isFinite(retries)) options.retry = {\n      retries\n    };else options.retry = {\n      retries: 0\n    };\n  } else if (typeof options.retry === 'number') options.retry = {\n    retries: options.retry\n  };else options.retry = {\n    retries: 0,\n    ...options.retry\n  };\n  options.cache = options.cache || 'default';\n\n  if (options.cache === 'default') {\n    const hasConditionalHeader = Object.keys(options.headers || {}).some(name => {\n      return conditionalHeaders.includes(name.toLowerCase());\n    });\n    if (hasConditionalHeader) options.cache = 'no-store';\n  } // cacheManager is deprecated, but if it's set and\n  // cachePath is not we should copy it to the new field\n\n\n  if (options.cacheManager && !options.cachePath) options.cachePath = options.cacheManager;\n  return options;\n};\n\nmodule.exports = configureOptions;","map":{"version":3,"sources":["/Users/johndoe/Nebe-data-vistualization/node_modules/npm/node_modules/make-fetch-happen/lib/options.js"],"names":["conditionalHeaders","configureOptions","opts","options","method","toUpperCase","Object","prototype","hasOwnProperty","call","rejectUnauthorized","strictSSL","retry","retries","parseInt","isFinite","cache","hasConditionalHeader","keys","headers","some","name","includes","toLowerCase","cacheManager","cachePath","module","exports"],"mappings":"AAAA,MAAMA,kBAAkB,GAAG,CACzB,mBADyB,EAEzB,eAFyB,EAGzB,qBAHyB,EAIzB,UAJyB,EAKzB,UALyB,CAA3B;;AAQA,MAAMC,gBAAgB,GAAIC,IAAD,IAAU;AACjC,QAAMC,OAAO,GAAG,EAAE,GAAGD;AAAL,GAAhB;AACAC,EAAAA,OAAO,CAACC,MAAR,GAAiBD,OAAO,CAACC,MAAR,GAAiBD,OAAO,CAACC,MAAR,CAAeC,WAAf,EAAjB,GAAgD,KAAjE;AACA,MAAIC,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,OAArC,EAA8C,WAA9C,CAAJ,EACEA,OAAO,CAACO,kBAAR,GAA6BP,OAAO,CAACQ,SAArC;AAEF,MAAI,CAACR,OAAO,CAACS,KAAb,EACET,OAAO,CAACS,KAAR,GAAgB;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAAhB,CADF,KAEK,IAAI,OAAOV,OAAO,CAACS,KAAf,KAAyB,QAA7B,EAAuC;AAC1C,UAAMC,OAAO,GAAGC,QAAQ,CAACX,OAAO,CAACS,KAAT,EAAgB,EAAhB,CAAxB;AACA,QAAIG,QAAQ,CAACF,OAAD,CAAZ,EACEV,OAAO,CAACS,KAAR,GAAgB;AAAEC,MAAAA;AAAF,KAAhB,CADF,KAGEV,OAAO,CAACS,KAAR,GAAgB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAhB;AACH,GANI,MAME,IAAI,OAAOV,OAAO,CAACS,KAAf,KAAyB,QAA7B,EACLT,OAAO,CAACS,KAAR,GAAgB;AAAEC,IAAAA,OAAO,EAAEV,OAAO,CAACS;AAAnB,GAAhB,CADK,KAGLT,OAAO,CAACS,KAAR,GAAgB;AAAEC,IAAAA,OAAO,EAAE,CAAX;AAAc,OAAGV,OAAO,CAACS;AAAzB,GAAhB;AAEFT,EAAAA,OAAO,CAACa,KAAR,GAAgBb,OAAO,CAACa,KAAR,IAAiB,SAAjC;;AACA,MAAIb,OAAO,CAACa,KAAR,KAAkB,SAAtB,EAAiC;AAC/B,UAAMC,oBAAoB,GAAGX,MAAM,CAACY,IAAP,CAAYf,OAAO,CAACgB,OAAR,IAAmB,EAA/B,EAAmCC,IAAnC,CAAyCC,IAAD,IAAU;AAC7E,aAAOrB,kBAAkB,CAACsB,QAAnB,CAA4BD,IAAI,CAACE,WAAL,EAA5B,CAAP;AACD,KAF4B,CAA7B;AAGA,QAAIN,oBAAJ,EACEd,OAAO,CAACa,KAAR,GAAgB,UAAhB;AACH,GA1BgC,CA4BjC;AACA;;;AACA,MAAIb,OAAO,CAACqB,YAAR,IAAwB,CAACrB,OAAO,CAACsB,SAArC,EACEtB,OAAO,CAACsB,SAAR,GAAoBtB,OAAO,CAACqB,YAA5B;AAEF,SAAOrB,OAAP;AACD,CAlCD;;AAoCAuB,MAAM,CAACC,OAAP,GAAiB1B,gBAAjB","sourcesContent":["const conditionalHeaders = [\n  'if-modified-since',\n  'if-none-match',\n  'if-unmodified-since',\n  'if-match',\n  'if-range',\n]\n\nconst configureOptions = (opts) => {\n  const options = { ...opts }\n  options.method = options.method ? options.method.toUpperCase() : 'GET'\n  if (Object.prototype.hasOwnProperty.call(options, 'strictSSL'))\n    options.rejectUnauthorized = options.strictSSL\n\n  if (!options.retry)\n    options.retry = { retries: 0 }\n  else if (typeof options.retry === 'string') {\n    const retries = parseInt(options.retry, 10)\n    if (isFinite(retries))\n      options.retry = { retries }\n    else\n      options.retry = { retries: 0 }\n  } else if (typeof options.retry === 'number')\n    options.retry = { retries: options.retry }\n  else\n    options.retry = { retries: 0, ...options.retry }\n\n  options.cache = options.cache || 'default'\n  if (options.cache === 'default') {\n    const hasConditionalHeader = Object.keys(options.headers || {}).some((name) => {\n      return conditionalHeaders.includes(name.toLowerCase())\n    })\n    if (hasConditionalHeader)\n      options.cache = 'no-store'\n  }\n\n  // cacheManager is deprecated, but if it's set and\n  // cachePath is not we should copy it to the new field\n  if (options.cacheManager && !options.cachePath)\n    options.cachePath = options.cacheManager\n\n  return options\n}\n\nmodule.exports = configureOptions\n"]},"metadata":{},"sourceType":"script"}