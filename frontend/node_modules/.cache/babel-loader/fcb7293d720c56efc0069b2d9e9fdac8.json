{"ast":null,"code":"import _objectSpread from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectWithoutProperties from\"/Users/johndoe/Nebe-data-vistualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"className\"];import React from'react';import{useHistory}from'react-router-dom';import{Row,Col,Button,Alert}from'react-bootstrap';import*as Yup from'yup';import{Formik}from'formik';import axios from'axios';import useScriptRef from'../../../hooks/useScriptRef';import{API_SERVER}from'./../../../config/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RestRegister=function RestRegister(_ref){var className=_ref.className,rest=_objectWithoutProperties(_ref,_excluded);var history=useHistory();var scriptedRef=useScriptRef();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Formik,{initialValues:{username:'',email:'',password:'',submit:null},validationSchema:Yup.object().shape({email:Yup.string().email('Must be a valid email').max(255).required('Email is required'),username:Yup.string().required('Username is required'),password:Yup.string().max(255).required('Password is required')}),onSubmit:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref2){var setErrors,setStatus,setSubmitting;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors=_ref2.setErrors,setStatus=_ref2.setStatus,setSubmitting=_ref2.setSubmitting;try{axios.post(API_SERVER+'users/register',{username:values.username,password:values.password,email:values.email}).then(function(response){if(response.data.success){history.push('/auth/signin');}else{setStatus({success:false});setErrors({submit:response.data.msg});setSubmitting(false);}}).catch(function(error){setStatus({success:false});setErrors({submit:error.response.data.msg});setSubmitting(false);});}catch(err){console.error(err);if(scriptedRef.current){setStatus({success:false});setErrors({submit:err.message});setSubmitting(false);}}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref3.apply(this,arguments);};}(),children:function children(_ref4){var errors=_ref4.errors,handleBlur=_ref4.handleBlur,handleChange=_ref4.handleChange,handleSubmit=_ref4.handleSubmit,isSubmitting=_ref4.isSubmitting,touched=_ref4.touched,values=_ref4.values;return/*#__PURE__*/_jsxs(\"form\",_objectSpread(_objectSpread({noValidate:true,onSubmit:handleSubmit,className:className},rest),{},{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",error:touched.username&&errors.username,label:\"Username\",placeholder:\"Username\",name:\"username\",onBlur:handleBlur,onChange:handleChange,type:\"email\",value:values.username}),touched.username&&errors.username&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger form-text\",children:errors.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",error:touched.email&&errors.email,label:\"Email Address\",placeholder:\"Email Address\",name:\"email\",onBlur:handleBlur,onChange:handleChange,type:\"email\",value:values.email}),touched.email&&errors.email&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger form-text\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",error:touched.password&&errors.password,label:\"Password\",placeholder:\"Password\",name:\"password\",onBlur:handleBlur,onChange:handleChange,type:\"password\",value:values.password}),touched.password&&errors.password&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger form-text\",children:errors.password})]}),errors.submit&&/*#__PURE__*/_jsx(Col,{sm:12,children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:errors.submit})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-control custom-checkbox  text-left mb-4 mt-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:\"customCheck1\"}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-control-label\",htmlFor:\"customCheck1\",children:\"Save credentials.\"})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{mt:2,children:/*#__PURE__*/_jsx(Button,{className:\"btn-block\",color:\"primary\",disabled:isSubmitting,size:\"large\",type:\"submit\",variant:\"primary\",children:\"Sign UP\"})})})]}));}}),/*#__PURE__*/_jsx(\"hr\",{})]});};export default RestRegister;","map":{"version":3,"sources":["/Users/johndoe/Nebe-data-vistualization/src/views/auth/signup/RestRegister.js"],"names":["React","useHistory","Row","Col","Button","Alert","Yup","Formik","axios","useScriptRef","API_SERVER","RestRegister","className","rest","history","scriptedRef","username","email","password","submit","object","shape","string","max","required","values","setErrors","setStatus","setSubmitting","post","then","response","data","success","push","msg","catch","error","err","console","current","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Row, Col, Button, Alert } from 'react-bootstrap';\n\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport axios from 'axios';\nimport useScriptRef from '../../../hooks/useScriptRef';\nimport { API_SERVER } from './../../../config/constant';\n\nconst RestRegister = ({ className, ...rest }) => {\n    let history = useHistory();\n    const scriptedRef = useScriptRef();\n\n    return (\n        <React.Fragment>\n            <Formik\n                initialValues={{\n                    username: '',\n                    email: '',\n                    password: '',\n                    submit: null\n                }}\n                validationSchema={Yup.object().shape({\n                    email: Yup.string().email('Must be a valid email').max(255).required('Email is required'),\n                    username: Yup.string().required('Username is required'),\n                    password: Yup.string().max(255).required('Password is required')\n                })}\n                onSubmit={async (values, { setErrors, setStatus, setSubmitting }) => {\n                    try {\n                        axios\n                            .post(API_SERVER + 'users/register', {\n                                username: values.username,\n                                password: values.password,\n                                email: values.email\n                            })\n                            .then(function (response) {\n                                if (response.data.success) {\n                                    history.push('/auth/signin');\n                                } else {\n                                    setStatus({ success: false });\n                                    setErrors({ submit: response.data.msg });\n                                    setSubmitting(false);\n                                }\n                            })\n                            .catch(function (error) {\n                                setStatus({ success: false });\n                                setErrors({ submit: error.response.data.msg });\n                                setSubmitting(false);\n                            });\n                    } catch (err) {\n                        console.error(err);\n                        if (scriptedRef.current) {\n                            setStatus({ success: false });\n                            setErrors({ submit: err.message });\n                            setSubmitting(false);\n                        }\n                    }\n                }}\n            >\n                {({ errors, handleBlur, handleChange, handleSubmit, isSubmitting, touched, values }) => (\n                    <form noValidate onSubmit={handleSubmit} className={className} {...rest}>\n                        <div className=\"form-group mb-3\">\n                            <input\n                                className=\"form-control\"\n                                error={touched.username && errors.username}\n                                label=\"Username\"\n                                placeholder=\"Username\"\n                                name=\"username\"\n                                onBlur={handleBlur}\n                                onChange={handleChange}\n                                type=\"email\"\n                                value={values.username}\n                            />\n                            {touched.username && errors.username && <small className=\"text-danger form-text\">{errors.username}</small>}\n                        </div>\n                        <div className=\"form-group mb-3\">\n                            <input\n                                className=\"form-control\"\n                                error={touched.email && errors.email}\n                                label=\"Email Address\"\n                                placeholder=\"Email Address\"\n                                name=\"email\"\n                                onBlur={handleBlur}\n                                onChange={handleChange}\n                                type=\"email\"\n                                value={values.email}\n                            />\n                            {touched.email && errors.email && <small className=\"text-danger form-text\">{errors.email}</small>}\n                        </div>\n                        <div className=\"form-group mb-4\">\n                            <input\n                                className=\"form-control\"\n                                error={touched.password && errors.password}\n                                label=\"Password\"\n                                placeholder=\"Password\"\n                                name=\"password\"\n                                onBlur={handleBlur}\n                                onChange={handleChange}\n                                type=\"password\"\n                                value={values.password}\n                            />\n                            {touched.password && errors.password && <small className=\"text-danger form-text\">{errors.password}</small>}\n                        </div>\n\n                        {errors.submit && (\n                            <Col sm={12}>\n                                <Alert variant=\"danger\">{errors.submit}</Alert>\n                            </Col>\n                        )}\n\n                        <div className=\"custom-control custom-checkbox  text-left mb-4 mt-2\">\n                            <input type=\"checkbox\" className=\"custom-control-input\" id=\"customCheck1\" />\n                            <label className=\"custom-control-label\" htmlFor=\"customCheck1\">\n                                Save credentials.\n                            </label>\n                        </div>\n\n                        <Row>\n                            <Col mt={2}>\n                                <Button\n                                    className=\"btn-block\"\n                                    color=\"primary\"\n                                    disabled={isSubmitting}\n                                    size=\"large\"\n                                    type=\"submit\"\n                                    variant=\"primary\"\n                                >\n                                    Sign UP\n                                </Button>\n                            </Col>\n                        </Row>\n                    </form>\n                )}\n            </Formik>\n            <hr />\n        </React.Fragment>\n    );\n};\n\nexport default RestRegister;\n"]},"metadata":{},"sourceType":"module"}